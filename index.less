// BUILT WITH INTENT OF BEING USED ALONG WITH CiOS THEME

// vars from CiOS
// https://github.com/Arch-Storm/CiOS

	// *** actually referenced in this file ***
	// --appleTransitionShort: 0.1s var(--appleEase);

	// *** not referenced in this file ***
	// --color1: rgb(60 60 67/ 2%);
	// --color2: rgb(203 203 203 / 30%);
	// --textColor: #333;
	// --mediaItemShadow-Shadow: 4px 4px 4px rgba(0, 0, 0, 0.15);
	// --mediaItemShadow-ShadowSubtle: 0 4px 4px rgba(0, 0, 0, 0.1);
	// --ciderShadow-Generic: var(--mediaItemShadow), 0 8px 8px rgb(0 0 0 / 0.15);
	// --bg: black;
	// --bg2: #171719;
	// --contrast: #F92A46;
	// --filter: brightness(0) saturate(100%) invert(29%) sepia(29%) saturate(7364%) hue-rotate(336deg)


// vars from cider, found in their github lol
	// --appleEase: cubic-bezier(0.42, 0, 0.58, 1);


// boolean toggles
@use-longer-volume-slider: true;

// config
@s-tabtoggle-btn-size: 		35px;			// size of square lyrics/queue buttons at bottom right
@s-btn-sm-border-radius:	10%;			// border radius applied to buttons and stuff
@s-muted-opacity: 			45%;			// muted items, e.g. the tracklist length at bottom
@s-hl-muted-opacity:		60%;			// highlight opacity for muted items
@s-screen-edge-padding: 	25px;			// for lyrics+queue buttons, nothing else yet
@s-volume-slider-height:	5px;			// volume slider height in now-playing page
@s-top-bar-height:			6vh;			// top bar in non-fullscreen
@s-sidebar-width:			20vw;
@s-sidebar-item-height:		36px;			// default is 36px, may need to change font-size as well
@s-sidebar-item-font-size:	7px;			// default is 14px, or 13px if "Compact UI" is on


// should be manually adjusted to match Volume Step setting found in Audio Settings>Volume Controls
// creates 100/x css rules with a loop later, this is truly peak css
@s-volume-slider-step:		1;				// e.g. Volume Step set to 5%, then value = 5		

@s-bg:					rgb(7, 7, 10);	   	// general app background color

@apple-transition: var(--appleTransition);
@apple-transition-short: 0.1s var(--appleEase);

@property --volumeSliderFillCol {
	syntax: "<color>";
	initial-value: rgb(200 200 200 / 0.6); // color on non-hover, goes to --textColor on hover
	inherits: false;
}

@property --songProgressColor {
	syntax: "<color>";
	initial-value: rgb(200 200 200 / 0.6); // color on non-hover, goes to --textColor on hover
	inherits: false;
}

@import "fullscreen.less";
@import "misc.less";

// lol
[title="DJ Khaled"] {
	opacity: 100% !important;
	font-family: "Comic Sans MS", "Comic Sans", cursive;
	font-weight: 800;

	// stack overflow blessed up 
	background: red;
	background: linear-gradient(to right, red , orange, yellow, green, blue, purple);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
}

.playlist-page .playlist-display {
	// remove blurred bg art on top of playlist views
	.artworkContainer {
		display: none;
	}

	.playlist-info {
		// background-color: rgb(0,);
	}
}

.playlist-page {
	padding-top: @s-top-bar-height;
}

.playback-info {
	.song-artist {
		opacity: @s-muted-opacity;
		text-decoration: none;
	}
}



// top bar
.app-chrome {
	height: @s-top-bar-height;
	background-color: rgb(0 0 0 / 0);
	box-shadow: none;
}

// sidebar
#app-sidebar {
	padding-top: @s-top-bar-height;
	background-color: @s-bg;

	max-width: @s-sidebar-width;

	& > * {
		background-color: inherit;
	}

	.app-sidebar-content {

		.sidebar-playlist {
			padding: 0px 3px 0px 3px;
		}	
	
		.app-sidebar-item {
			border-radius: 5px !important;
			margin: 0px 0px 3px 0px !important;
			height: @s-sidebar-item-height;
		}
	}
}

// compact sidebar, change font and playlist div height
#app.compact .app-sidebar-content {

	.app-sidebar-item {
		height: @s-sidebar-item-height;
		font-size: @s-sidebar-item-font-size;
	}

}

.app-chrome-item.playback-controls {
	max-width: 550px !important;
}

// playback slider adjustments
.song-progress {

	width: 100%;
	align-items: center;

	// song playback slider
	& input[type="range"] {

		// invis the circle button on slider
		&::-webkit-slider-thumb {
		opacity: 0 !important;
		}
		
		height: @s-volume-slider-height !important;

		border-radius: $height;
		transition: --songProgressColor @apple-transition;

		&:hover {
			--songProgressColor: var(--textColor);
		}
	}
}

// volume slider
.app-chrome-item.volume {

	height: @s-volume-slider-height*1.5;
	width: 85%;
	margin-right: auto;
	margin-left: auto;

	// remove mute button cause who actually uses it
	[title="Mute"] {
		display: none;
	}

	input[type="range"] {

		// invis the circle button on slider
		&::-webkit-slider-thumb {
			opacity: 0;
		} 
	
		height: @s-volume-slider-height !important;
		border-radius: @s-volume-slider-height * 2.25;
		width: 97% !important;

		transition: all @apple-transition, --volumeSliderFillCol @apple-transition;

		&:hover {
			height: @s-volume-slider-height * 1.3 !important;
			width: 100% !important;
			
			--volumeSliderFillCol: var(--textColor);
		}

		// set length of volume slider fill via color rule for each volume, step=1, from [1, 100]
		.setInputSliderFill(@counter) when (@counter < 101) {
			.setInputSliderFill((@counter + @s-volume-slider-step));

			// volume slider fill length
			&[title="@{counter}%"], &[data-original-title="@{counter}%"] {
				@volume-pct: 1% * (@counter);
				background: linear-gradient(
					to right,
					var(--volumeSliderFillCol) 0% @volume-pct,
					var(--songProgressBackground) @volume-pct 100%
				) !important;
			}
		}
		.setInputSliderFill(0);
	}
}

// clickable links - remove text-decoration, use slight color highlighting instead
.item-navigate {
	opacity: @s-muted-opacity;
	text-decoration: none;

	transition: opacity var(--appleTransitionShort);

	&:hover {
		opacity: @s-hl-muted-opacity;
	}
}

// left align text underneath cards in made-for-you tabs and others will medium sized cards
.cd-mediaitem-square:not(.mediaitem-card), .cd-mediaitem-list-item:not(.mediaitem-card) {
	justify-content: left;

	.info-rect {
		padding-left: 2px;

		.title {
			justify-content: left;
		}

		.subtitle, .subtitle .artist {
			opacity: @s-muted-opacity;
			text-decoration: none;

			transition: opacity var(--appleTransitionShort);

			&:hover {
				opacity: @s-hl-muted-opacity;
			}
		}
	}

	.item-navigate {
		text-align: left;
	}
}

// make bg solid black, ie dont render blurred img of album art as background
.background {
	display: none;
}

// ??? lol put this somewhere where it belongs
#app-content {
	background-color: @s-bg
}

// lower well brightness
.well {
	background-color: rgb(150 150 150 / 0.02);
}

// item entry rows in tracklists
.cd-mediaitem-list-item {

	// smooth hover highlighting slightly
	transition: background 0.1s var(--appleEase);

	&:hover {
		box-shadow: var(--mediaItemShadow-ShadowSubtle);
	}
	
	&:nth-child(odd) {
		background: rgb(0 0 0 / 0.05);

		transition: background @apple-transition;

		&:hover {
			background: rgba(200, 200, 200, 0.1);
		}
	}
}

// lower visibility of playlist/album date and playlength info at bottom of tracklist
.playlist-time {
	opacity: @s-muted-opacity;
}