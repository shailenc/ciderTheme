// BUILT WITH INTENT OF BEING USED ALONG WITH CiOS THEME

// vars from CiOS
// https://github.com/Arch-Storm/CiOS

	// *** actually referenced in this file ***
	// --appleTransitionShort: 0.1s var(--appleEase);

	// *** not referenced in this file ***
	// --color1: rgb(60 60 67/ 2%);
	// --color2: rgb(203 203 203 / 30%);
	// --textColor: #333;
	// --mediaItemShadow-Shadow: 4px 4px 4px rgba(0, 0, 0, 0.15);
	// --mediaItemShadow-ShadowSubtle: 0 4px 4px rgba(0, 0, 0, 0.1);
	// --ciderShadow-Generic: var(--mediaItemShadow), 0 8px 8px rgb(0 0 0 / 0.15);
	// --bg: black;
	// --bg2: #171719;
	// --contrast: #F92A46;
	// --filter: brightness(0) saturate(100%) invert(29%) sepia(29%) saturate(7364%) hue-rotate(336deg)


// vars from cider, found in their github lol
	// --appleEase: cubic-bezier(0.42, 0, 0.58, 1);

	
@s-tabtoggle-btn-size: 		35px;			// size of square lyrics/queue buttons at bottom right
@s-btn-sm-border-radius:	10%;			// border radius applied to buttons and stuff
@s-muted-opacity: 			45%;			// muted items, e.g. the tracklist length at bottom
@s-hl-muted-opacity:		60%;			// highlight opacity for muted items
@s-screen-edge-padding: 	25px;			// for lyrics+queue buttons, nothing else yet
@s-volume-slider-height:	5px;			// volume slider height in now-playing page


// should be manually adjusted to match Volume Step setting found in Audio Settings>Volume Controls
// creates 100/x css rules with a loop later, this is truly peak css
@s-volume-slider-step:		1;				// e.g. Volume Step set to 5%, then value = 5		

@s-bg:					rgb(7, 7, 10);	   	// general app background color

@apple-transition: var(--appleTransition);
@apple-transition-short: 0.1s var(--appleEase);

@property --volumeSliderFillCol {
	syntax: "<color>";
	initial-value: rgb(200 200 200 / 0.6); // color on non-hover, goes to --textColor on hover
	inherits: false;
}

@property --songProgressColor {
	syntax: "<color>";
	initial-value: rgb(200 200 200 / 0.6); // color on non-hover, goes to --textColor on hover
	inherits: false;
}

// .fullscreen-view {

// black fade for upper and lower bounds of scrolling lyrics
.lyric-body {
	mask-image: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 8%, rgba(0,0,0,1) 92%, rgba(0,0,0,0) 100%);
	-webkit-mask-image: $mask-image;
}

// lol
[title="DJ Khaled"] {
	opacity: 100% !important;
	font-family: "Comic Sans MS", "Comic Sans", cursive;
	font-weight: 800;

	// stack overflow blessed up 
	background: red;
	background: linear-gradient(to right, red , orange, yellow, green, blue, purple);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
}

.playback-info {
	.song-artist {
		opacity: @s-muted-opacity;
		text-decoration: none;
	}
}

.fullscreen-view {

	.app-chrome-item.volume {
		margin-top: 2vh;
	}
}

// playback slider adjustments
.song-progress {

	height: @s-volume-slider-height*1.5;
	width: 85%;
	margin-right: auto;
	margin-left: auto;

	// volume slider
	& input[type="range"] {

		// invis the circle button on slider
		&::-webkit-slider-thumb {
			// opacity: 0;
		} 
	
		height: @s-volume-slider-height !important;
		border-radius: @s-volume-slider-height * 2.25;
		width: 98% !important;

		transition: all @apple-transition, --songProgressColor @apple-transition;

		&:hover {
			height: @s-volume-slider-height * 2 !important;
			width: 100% !important;
			
			--songProgressColor: var(--textColor);
		}

	}
}



.app-chrome-item.volume {

	height: @s-volume-slider-height*1.5;
	width: 85%;
	margin-right: auto;
	margin-left: auto;

	// remove mute button (just drag the slider to zero L0L)
	[title="Mute"] {
		display: none;
	}

	// volume slider
	input[type="range"] {

		// invis the circle button on slider
		&::-webkit-slider-thumb {
			opacity: 0;
		} 
	
		height: @s-volume-slider-height !important;
		border-radius: @s-volume-slider-height * 2.25;
		width: 98% !important;

		transition: all @apple-transition, --volumeSliderFillCol @apple-transition;

		&:hover {
			height: @s-volume-slider-height * 2 !important;
			width: 100% !important;
			
			--volumeSliderFillCol: var(--textColor);
		}

		// set length of volume slider fill via color rule for each volume, step=1, from [1, 100]
		.setInputSliderFill(@counter) when (@counter < 101) {
			.setInputSliderFill((@counter + @s-volume-slider-step));

			// volume slider fill length
			&[title="@{counter}%"], &[data-original-title="@{counter}%"] {
				@volume-pct: 1% * (@counter);
				background: linear-gradient(
					to right,
					var(--volumeSliderFillCol) 0% @volume-pct,
					var(--songProgressBackground) @volume-pct 100%
				) !important;
			}
		}
		.setInputSliderFill(0);
	}
}

// on clickable links - remove text-decoration, use color highlighting instead
.item-navigate {
	opacity: @s-muted-opacity;
	text-decoration: none;

	transition: opacity var(--appleTransitionShort);

	&:hover {
		opacity: @s-hl-muted-opacity;
	}
}

// left align text underneath cards in made-for-you tabs and others will medium sized cards
.cd-mediaitem-square:not(.mediaitem-card), .cd-mediaitem-list-item:not(.mediaitem-card) {
	justify-content: left;

	.info-rect {
		padding-left: 2px;

		.title {
			justify-content: left;
		}

		.subtitle, .subtitle .artist {
			opacity: @s-muted-opacity;
			text-decoration: none;

			transition: opacity var(--appleTransitionShort);

			&:hover {
				opacity: @s-hl-muted-opacity;
			}
		}
	}

	.item-navigate {
		text-align: left;
	}
}

// make bg solid black, ie dont render blurred img of album art as background
.background {
	display: none;
}

// ??? lol put this somewhere where it belongs
#app-content {
	background-color: @s-bg
}

// slight highlight wells
.well {
	background-color: rgb(150 150 150 / 0.01);
	transition: background-color @apple-transition;

	&:hover {
		background-color: rgb(150 150 150 / 0.02);
	}
}

// if on now-playing tab, fade screen when cursor not on app
.row.fs-row {
	transition: opacity 0.35s var(--appleEase), filter 0.5s var(--appleEase);
}

&:not(&:hover) .row.fs-row {
	opacity: 0.3;
	filter: blur(1px) saturate(0.8);
	// transition: opacity 0.35s var(--appleEase), filter 0.5s var(--appleEase);
}

&:hover {
	& .row.fs-row {
		opacity: 1;
		filter: blur(0px) saturate(1);
	}
}


// lyrics and queue buttons, hover effects and transparency whe not used
.tab-toggles {

	width: @s-tabtoggle-btn-size * 2.6 !important;
	height: @s-tabtoggle-btn-size * 1.2 !important;

	right: @s-tabtoggle-btn-size * 0.5 !important;
	bottom: $right;
	
	opacity: 0.07;
	filter: blur(1px);
	border-radius: @s-btn-sm-border-radius;

	&:hover {
		transition: filter,opacity @apple-transition;
		filter: blur(0);
		opacity: 0.2;
		background-color: rgb(0 0 0 / 0.5);
	}

	.lyrics, .queue {
		width: @s-tabtoggle-btn-size;
		height: @s-tabtoggle-btn-size;
		align-self: center;
		border-radius: @s-btn-sm-border-radius;

		&:not(.active):hover {
			background-color:rgb(255 255 255 / 0.4);
			transition: background-color @apple-transition;
		}
	}
}

// invis top navbar until hover
.fs-header .top-nav-group {
	opacity: 0;
	transition: opacity 0.15s var(--appleEase);

	&:hover {
		opacity: 0.8;
	}
}

// slight expand of album pic on hover
.fs-row .artwork-col .mediaitem-artwork {

	transition: transform 1.75s var(--appleEase);
	transform: scale(0.995);

	&:hover {
		transform: scale(1);
	}
}

// item entry rows in tracklists
.cd-mediaitem-list-item {

	// smooth hover highlighting slightly
	transition: background 0.1s var(--appleEase);

	&:hover {
		box-shadow: var(--mediaItemShadow-ShadowSubtle);
	}
	
	&:nth-child(odd) {
		background: rgb(0 0 0 / 0.05);

		transition: background @apple-transition;

		&:hover {
			background: rgba(200, 200, 200, 0.1);
		}
	}
}

// lower visibility of playlist/album date and playlength info at bottom of tracklist
.playlist-time {
	opacity: @s-muted-opacity;
}

// }